basePath: /
definitions:
  models.AuthData:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/models.User'
    type: object
  models.AuthError:
    properties:
      code:
        type: string
      details: {}
      message:
        type: string
    type: object
  models.AuthResponse:
    properties:
      data:
        $ref: '#/definitions/models.AuthData'
      error:
        $ref: '#/definitions/models.AuthError'
      message:
        type: string
      success:
        type: boolean
    type: object
  models.CustomExpiration:
    properties:
      days:
        description: '"0" | "1" | ... | "30"'
        type: string
      hours:
        description: '"0" | "1" | ... | "23"'
        type: string
      minutes:
        description: '"0" | "1" | ... | "59"'
        type: string
      months:
        description: '"0" | "1" | ... | "11"'
        type: string
      years:
        description: '"0" | "1" | "2" | "3" | "4"'
        type: string
    type: object
  models.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  models.RegisterRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      password:
        minLength: 8
        type: string
    required:
    - email
    - first_name
    - last_name
    - password
    type: object
  models.ShortenURLRequest:
    properties:
      custom_expiration:
        $ref: '#/definitions/models.CustomExpiration'
      expiration_preset:
        description: '"1hour" | "12hours" | "1day" | "7days" | "1month" | "6months"
          | "1year" | "default"'
        type: string
      url:
        type: string
    required:
    - url
    type: object
  models.SupportRequest:
    properties:
      email:
        maxLength: 255
        type: string
      message:
        maxLength: 5000
        minLength: 1
        type: string
      name:
        maxLength: 100
        minLength: 1
        type: string
    required:
    - email
    - message
    - name
    type: object
  models.SupportResponse:
    properties:
      error:
        $ref: '#/definitions/models.AuthError'
      message:
        type: string
      success:
        type: boolean
    type: object
  models.UpdateStatusRequest:
    properties:
      status:
        description: 'Required: must be "active" or "paused"'
        enum:
        - active
        - paused
        type: string
    required:
    - status
    type: object
  models.UpdateURLRequest:
    properties:
      custom_expiration:
        allOf:
        - $ref: '#/definitions/models.CustomExpiration'
        description: 'Optional: only if custom expiration selected'
      expiration_preset:
        description: 'Optional: only if expiration changed'
        type: string
      url:
        description: 'Optional: only if URL changed'
        type: string
    type: object
  models.User:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      email:
        type: string
      email_verified:
        type: boolean
      first_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_login:
        type: string
      last_name:
        type: string
      provider:
        description: '''email'', ''google'', ''apple'''
        type: string
      provider_id:
        description: OAuth provider's unique ID
        type: string
      updated_at:
        type: string
    type: object
  models.UserProfileResponse:
    properties:
      data:
        $ref: '#/definitions/models.User'
      error:
        $ref: '#/definitions/models.AuthError'
      message:
        type: string
      success:
        type: boolean
    type: object
host: localhost:8080
info:
  contact:
    email: support@sniply.co.in
    name: API Support
    url: https://sniply.co.in/support
  description: A URL shortener service API with authentication and analytics
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://sniply.co.in/terms
  title: URL Shortener API
  version: "1.0"
paths:
  /{code}:
    get:
      consumes:
      - application/json
      description: Redirects to the original URL associated with the short code. Supports
        both GET and HEAD methods. GET requests count as clicks and redirect, while
        HEAD requests only check status and do not count as clicks.
      parameters:
      - description: Short code
        in: path
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: HEAD request - Status check only (no click counted)
          schema:
            type: string
        "302":
          description: GET request - Redirect (click counted)
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "410":
          description: Gone
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      summary: Redirect to original URL
      tags:
      - public
    head:
      consumes:
      - application/json
      description: Redirects to the original URL associated with the short code. Supports
        both GET and HEAD methods. GET requests count as clicks and redirect, while
        HEAD requests only check status and do not count as clicks.
      parameters:
      - description: Short code
        in: path
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: HEAD request - Status check only (no click counted)
          schema:
            type: string
        "302":
          description: GET request - Redirect (click counted)
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "410":
          description: Gone
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      summary: Redirect to original URL
      tags:
      - public
  /api/delete/{code}:
    delete:
      consumes:
      - application/json
      description: Deletes a shortened URL by its code (only if owned by the authenticated
        user)
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Delete a URL
      tags:
      - urls
  /api/shorten:
    post:
      consumes:
      - application/json
      description: Creates a shortened URL from a long URL
      parameters:
      - description: URL to shorten
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.ShortenURLRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Shorten a URL
      tags:
      - urls
  /api/support:
    post:
      consumes:
      - application/json
      description: Submits a support request with rate limiting
      parameters:
      - description: Support request details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.SupportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SupportResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.SupportResponse'
        "429":
          description: Too Many Requests
          schema:
            additionalProperties: true
            type: object
      summary: Submit support request
      tags:
      - support
  /api/swagger-token:
    get:
      consumes:
      - application/json
      description: Returns the JWT token from the Swagger authentication cookie. This
        endpoint is used internally by Swagger UI to automatically set the Bearer
        token. Requires Swagger-specific authentication (swagger_auth_token cookie).
      produces:
      - application/json
      responses:
        "200":
          description: Token object with 'token' field
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.AuthResponse'
      security:
      - BearerAuth: []
      summary: Get Swagger authentication token
      tags:
      - swagger
  /api/test:
    get:
      consumes:
      - application/json
      description: Returns the count of tables in the database
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      summary: Test database connection
      tags:
      - test
  /api/urls:
    get:
      consumes:
      - application/json
      description: Returns all shortened URLs created by the authenticated user with
        statistics
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List user's URLs
      tags:
      - urls
  /api/urls/{code}:
    patch:
      consumes:
      - application/json
      description: Updates the original URL and/or expiration date of a shortened
        URL (only if owned by the authenticated user)
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateURLRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "410":
          description: Gone
          schema:
            additionalProperties: true
            type: object
        "422":
          description: Unprocessable Entity
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update a short URL
      tags:
      - urls
  /api/urls/{code}/qr:
    get:
      consumes:
      - application/json
      description: Returns the QR code image for a short link. If QR code doesn't
        exist, it will be generated automatically with default size (256px). Use ?download=true
        to force download instead of inline display. Use ?regenerate=true to force
        regeneration of existing QR code.
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      - description: Force download (true) or inline display (false, default)
        in: query
        name: download
        type: boolean
      - description: Force regeneration of QR code even if it exists (true) or use
          existing (false, default)
        in: query
        name: regenerate
        type: boolean
      produces:
      - image/png
      responses:
        "200":
          description: QR code PNG image
          schema:
            type: file
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get QR code image
      tags:
      - urls
    post:
      consumes:
      - application/json
      description: Generates or regenerates a QR code for a short link with the specified
        size. If QR code already exists, it will be regenerated.
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      - description: QR code generation request
        in: body
        name: request
        schema:
          type: object
      - description: 'QR code size in pixels (256, 512, or 1024). Default: 256'
        in: query
        name: size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Generate or regenerate QR code
      tags:
      - urls
  /api/urls/{code}/stats:
    get:
      consumes:
      - application/json
      description: Returns detailed statistics for a shortened URL (only if owned
        by the authenticated user)
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get URL statistics
      tags:
      - urls
  /api/urls/{code}/status:
    patch:
      consumes:
      - application/json
      description: Updates the status of a short link (pause or resume). Only updates
        the status field, does not affect URL or expiration.
      parameters:
      - description: Short code of the URL
        in: path
        name: code
        required: true
        type: string
      - description: Status update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.UpdateStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update URL status
      tags:
      - urls
  /auth/google:
    get:
      consumes:
      - application/json
      description: Redirects to Google OAuth consent screen
      produces:
      - application/json
      responses:
        "307":
          description: Redirect to Google
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.AuthResponse'
      summary: Initiate Google OAuth
      tags:
      - auth
  /auth/google/callback:
    get:
      consumes:
      - application/json
      description: Handles the OAuth callback from Google and creates/updates user
      parameters:
      - description: Authorization code from Google
        in: query
        name: code
        required: true
        type: string
      - description: State parameter for CSRF protection
        in: query
        name: state
        required: true
        type: string
      produces:
      - application/json
      responses:
        "307":
          description: Redirect to frontend with error
          schema:
            type: string
      summary: Google OAuth callback
      tags:
      - auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates a user with email and password. JWT token is set
        in HttpOnly cookie only (not returned in response body for security). For
        API clients, use cookie-based authentication or implement a separate token
        endpoint.
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.AuthResponse'
      summary: Login user
      tags:
      - auth
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Clears the authentication cookie and logs out the user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.AuthResponse'
      summary: Logout user
      tags:
      - auth
  /auth/me:
    get:
      consumes:
      - application/json
      description: Returns the authenticated user's profile information
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UserProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.AuthResponse'
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Creates a new user account with email and password. JWT token is
        set in HttpOnly cookie only (not returned in response body for security).
        For API clients, use cookie-based authentication or implement a separate token
        endpoint.
      parameters:
      - description: Registration details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.AuthResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.AuthResponse'
      summary: Register a new user
      tags:
      - auth
  /auth/swagger-logout:
    post:
      consumes:
      - application/json
      description: Clears the Swagger-specific authentication cookie (swagger_auth_token).
        This endpoint is used by Swagger UI's logout functionality. No authentication
        required.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.AuthResponse'
      summary: Logout from Swagger UI
      tags:
      - auth
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
